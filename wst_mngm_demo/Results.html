{{ block title }}
    Results
{{ endblock }}

{{ block content }}

<h2>
    End of day {{ player.round_number }} as {{ player.role_own }} role.
</h2>

{{ if player.role_own == 'UC' and player.sold > 0 }}
    The clearing price is {{ player.ClPr }}. <br>
{{ endif }}

{{ if player.role_own == 'CH' and player.bought > 0 }}
    The clearing price is {{ player.ClPr }}. <br>
{{ endif }}

{{ if player.role_own == 'UC' and player.actionD > 0 or player.UCOpenSupply > 0 }}
    The default operator's tariff is {{ Constants.OpTariff }}. <br> <br>
{{ endif }}

{{ if player.role_own == 'CH' and player.actionD > 0 }}
    The default operator's tariff is {{ Constants.OpTariff }}. <br> <br>
{{ endif }}

{{ if player.role_own == 'UC' or player.role_own == 'CH' }}

<table class="table results-table">
    <thead>
        <tr>
            <th scope="col">Balance</th>
            <th scope="col">Stored</th>
            {{ if player.role_own == 'UC' }}
                <th colspan="2">Pushed to platform</th>
                <th colspan="2">Disposed through standard means</th>
            {{ endif }}
            {{ if player.role_own == 'CH' }}
                <th colspan="2">Bought from UC (IDs) </th>
                <th scope="col">Sold to RE (IDs)</th>
                <th scope="col">Disposed through standard means</th>
            {{ endif }}
        </tr>
    </thead>
    <tbody>
        <tr>
            <td></td>
            <td></td>
            {{ if player.role_own == 'UC' }}
                <td>Offered</td>
                <td>Sold to CH (IDs)</td>
                <td>Willingly</td>
                <td>Not sold to any CH</td>
            {{ endif }}
            {{ if player.role_own == 'CH' }}
                <td>Demanded</td>
                <td>Bought</td>
                <td></td>
                <td></td>
            {{ endif }}
        </tr>
        <tr>
            <td>{{ player.participant.balance }}</td>
            <td>{{ player.participant.store }}</td>
            {{ if player.role_own == 'UC' }}
                <td>{{ player.actionPP }}</td>
                <td>{{ player.sold }}</td>
                <td>{{ player.actionD }}</td>
                <td>{{ player.UCOpenSupply }}</td>
            {{ endif }}
            {{ if player.role_own == 'CH' }}
                <td>{{ player.actionBCH }}</td>
                {#
                {{ for item in ExDat }}
                    <td>From UC<sub>{{item.0}}</sub> bought {{item.1}} for price {{item.2}} </td>
                {{ endfor }}
                #}
                {{ html }}
                {# <td>{{ player.bought }}</td> #}
                <td>TBD</td>
                <td>{{ player.actionD }}</td>
            {{ endif }}
        </tr>
    </tbody>
</table>
<br>
{{ else }}
  <p>
      You might have bought some items.
  </p>

{{ endif }}


{{ next_button }}
{{ endblock }}

{{ block styles }}
<style>
    .results-table {
        border-collapse: collapse;
        width: 100%;
        text-align: center
    }
    .results-table td, .results-table th {
        padding: 8px;
    }

    .results-table tr:nth-child(odd){
        background-color: #f2f2f2;
    }

    .results-table tr th:nth-of-type(2),
    .results-table tr th:nth-of-type(3),
    .results-table tr td:nth-of-type(2),
    .results-table tr td:nth-of-type(4){
        border: 1px solid #ddd;
        border-right: 1px solid black;
    }

    .results-table tr th:nth-of-type(1),
    .results-table tr th:nth-of-type(4),
    .results-table tr td:nth-of-type(1),
    .results-table tr td:nth-of-type(6){
        border: 1px solid #ddd;
    }

    .results-table th {
        padding-top: 12px;
        padding-bottom: 12px;
        background-color: #5C933F;
        color: white;
    }
</style>
{{ endblock }}
