{{ block title }} 
    Recycpoly 
{{ endblock }} 
{{ block content }} 

<h2>
    Day {{ player.round_number }} as {{ player.role_own }} role. Selling session.
</h2>

<br>
<table class="table overview-table">
    <thead>
      <tr>
        <th scope="col">Balance</th>
        <th scope="col">Capacity (C<sub>max</sub> = {{ if player.role_own == 'UC' }}{{ Constants.UCCmax }}{{ else }}{{ Constants.CHCmax }}{{ endif }})</th>
        <th scope="col">Items in store</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>{{ player.participant.balance }}</td>
        <td>{{ player.participant.capac }}</td>
        <td>{{ player.participant.store }}</td>
      </tr>
    </tbody>
  </table>
<br>


{{ if player.role_own == 'CH' }}
<img src="{{ static 'wst_mngm_main/CH.png' }}"/>
{{ endif }}

{{ if group.treatmentLearnMore }}
<br><br>
  Learn <a href="{{ static 'wst_mngm_main/DetailedGamePlayInstructions.html' }}" target="_blank">more</a> on how to play optimally.
{{ comment }}
<button type="button" onclick="openPopup()" class="btn btn-primary">Learn more on how to play optimally.</button>
{{ endcomment }}
<br><br>
{{ endif }}

<p>
    On this day, you bought {{ player.bought }} items and now have {{ player.participant.store }} items in store.
</p>

{{ formfields }}

<p>
    Selling items will incur fixed costs of {{ Constants.CHCostsSell }}. <br>
    These costs arise for any number of items sold other than zero.
</p>

{{ next_button }} 

<div class="fadeMe" id="grayOut" style="display: none"></div>
<div class="popup" id="popupBox" style="display: none">
  {{ if player.role_own == 'UC' }}
    UC text
  {{ else }}
    CH text
  {{ endif }}
  <br><br>
  <button type="button" onclick="closePopup()" class="btn btn-primary">Close</button>
</div>

<input type="hidden" name="use_hint" id="use_hint" value="0">

{{ endblock }}

{{ block styles }}
<style>
    .overview-table {
        border-collapse: collapse;
        width: 100%;
    }
    .overview-table td, .overview-table th {
        border: 1px solid #ddd;
        padding: 8px;
    }

    .overview-table tr:nth-child(odd){
        background-color: #f2f2f2;
    }

    .overview-table th {
        padding-top: 12px;
        padding-bottom: 12px;
        text-align: left;
        background-color: #5C933F;
        color: white;
    }
</style>
{{ endblock }}

{{ block scripts }}
<script>
  let treatmentPopUp = js_vars.treatmentPopUp;

  window.onload = function() {
    if (treatmentPopUp) {
      setTimeout(function() {
        document.getElementById("grayOut").style.display = "block";
        document.getElementById("popupBox").style.display = "block";
        }, 2*1000);
    }
  };

  function openPopup() {
    document.getElementById("grayOut").style.display = "block";
    document.getElementById("popupBox").style.display = "block";
    document.getElementById("use_hint").value = true;
  }

  function closePopup() {
    document.getElementById("grayOut").style.display = "none";
    document.getElementById("popupBox").style.display = "none";
  }
</script>
{{ endblock }}